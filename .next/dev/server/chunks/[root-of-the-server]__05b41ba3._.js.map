{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/projects/edu-bridge-ai-platform/lib/auth.ts"],"sourcesContent":["import { cookies } from 'next/headers';\n\nexport type Session = { id: string; role: 'student'|'teacher'|'admin'; name: string; email: string }\n\nexport async function getSession(): Promise<Session | null> {\n  const cookieStore = await cookies()\n  const c = cookieStore.get('edubridge_session')?.value\n  if (!c) return null\n  try {\n    return JSON.parse(c)\n  } catch {\n    return null\n  }\n}\n\nexport async function requireRole(role: Session['role']): Promise<Session | null> {\n  const s = await getSession()\n  if (!s || s.role !== role) {\n    return null\n  }\n  return s\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAIO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,2QAAO;IACjC,MAAM,IAAI,YAAY,GAAG,CAAC,sBAAsB;IAChD,IAAI,CAAC,GAAG,OAAO;IACf,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,YAAY,IAAqB;IACrD,MAAM,IAAI,MAAM;IAChB,IAAI,CAAC,KAAK,EAAE,IAAI,KAAK,MAAM;QACzB,OAAO;IACT;IACA,OAAO;AACT"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///E:/projects/edu-bridge-ai-platform/lib/models/StandaloneQuiz.ts"],"sourcesContent":["import mongoose, { Document, Model, Schema } from 'mongoose'\n\nexport interface IStandaloneQuiz extends Document {\n  title: string\n  subject: string\n  description?: string\n  instructor: mongoose.Types.ObjectId\n  questions: {\n    question: string\n    options: string[]\n    correctAnswer: number\n    explanation?: string\n  }[]\n  passingScore: number\n  status: 'draft' | 'published'\n  createdAt: Date\n  updatedAt: Date\n}\n\nconst StandaloneQuizSchema = new Schema<IStandaloneQuiz>(\n  {\n    title: {\n      type: String,\n      required: [true, 'Please provide a quiz title'],\n      trim: true,\n    },\n    subject: {\n      type: String,\n      required: [true, 'Please specify a subject'],\n      trim: true,\n    },\n    description: {\n      type: String,\n      trim: true,\n    },\n    instructor: {\n      type: Schema.Types.ObjectId,\n      ref: 'User',\n      required: true,\n    },\n    questions: [\n      {\n        question: {\n          type: String,\n          required: true,\n        },\n        options: {\n          type: [String],\n          required: true,\n          validate: {\n            validator: (v: string[]) => v.length >= 2,\n            message: 'At least 2 options are required',\n          },\n        },\n        correctAnswer: {\n          type: Number,\n          required: true,\n        },\n        explanation: String,\n      },\n    ],\n    passingScore: {\n      type: Number,\n      default: 70,\n      min: 0,\n      max: 100,\n    },\n    status: {\n      type: String,\n      enum: ['draft', 'published'],\n      default: 'draft',\n    },\n  },\n  {\n    timestamps: true,\n  }\n)\n\n// Indexes\nStandaloneQuizSchema.index({ instructor: 1 })\nStandaloneQuizSchema.index({ subject: 1 })\nStandaloneQuizSchema.index({ status: 1 })\nStandaloneQuizSchema.index({ title: 'text', subject: 'text' })\n\nconst StandaloneQuiz: Model<IStandaloneQuiz> =\n  mongoose.models.StandaloneQuiz || mongoose.model<IStandaloneQuiz>('StandaloneQuiz', StandaloneQuizSchema)\n\nexport default StandaloneQuiz\n"],"names":[],"mappings":";;;;AAAA;;AAmBA,MAAM,uBAAuB,IAAI,mHAAM,CACrC;IACE,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAA8B;QAC/C,MAAM;IACR;IACA,SAAS;QACP,MAAM;QACN,UAAU;YAAC;YAAM;SAA2B;QAC5C,MAAM;IACR;IACA,aAAa;QACX,MAAM;QACN,MAAM;IACR;IACA,YAAY;QACV,MAAM,mHAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,KAAK;QACL,UAAU;IACZ;IACA,WAAW;QACT;YACE,UAAU;gBACR,MAAM;gBACN,UAAU;YACZ;YACA,SAAS;gBACP,MAAM;oBAAC;iBAAO;gBACd,UAAU;gBACV,UAAU;oBACR,WAAW,CAAC,IAAgB,EAAE,MAAM,IAAI;oBACxC,SAAS;gBACX;YACF;YACA,eAAe;gBACb,MAAM;gBACN,UAAU;YACZ;YACA,aAAa;QACf;KACD;IACD,cAAc;QACZ,MAAM;QACN,SAAS;QACT,KAAK;QACL,KAAK;IACP;IACA,QAAQ;QACN,MAAM;QACN,MAAM;YAAC;YAAS;SAAY;QAC5B,SAAS;IACX;AACF,GACA;IACE,YAAY;AACd;AAGF,UAAU;AACV,qBAAqB,KAAK,CAAC;IAAE,YAAY;AAAE;AAC3C,qBAAqB,KAAK,CAAC;IAAE,SAAS;AAAE;AACxC,qBAAqB,KAAK,CAAC;IAAE,QAAQ;AAAE;AACvC,qBAAqB,KAAK,CAAC;IAAE,OAAO;IAAQ,SAAS;AAAO;AAE5D,MAAM,iBACJ,oHAAQ,CAAC,MAAM,CAAC,cAAc,IAAI,oHAAQ,CAAC,KAAK,CAAkB,kBAAkB;uCAEvE"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///E:/projects/edu-bridge-ai-platform/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI as string;\n\nif (!MONGODB_URI) {\n  throw new Error(\n    'Please define the MONGODB_URI environment variable inside .env.local'\n  );\n}\n\n/**\n * Global is used here to maintain a cached connection across hot reloads\n * in development. This prevents connections growing exponentially\n * during API Route usage.\n */\ninterface MongooseCache {\n  conn: typeof mongoose | null;\n  promise: Promise<typeof mongoose> | null;\n}\n\ndeclare global {\n  var mongoose: MongooseCache | undefined;\n}\n\nlet cached: MongooseCache = global.mongoose || { conn: null, promise: null };\n\nif (!global.mongoose) {\n  global.mongoose = cached;\n}\n\nasync function connectDB(): Promise<typeof mongoose> {\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n      serverSelectionTimeoutMS: 5000,\n      socketTimeoutMS: 45000,\n    };\n\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n      console.log('✅ MongoDB connected successfully');\n      return mongoose;\n    }).catch((err) => {\n      console.error('❌ MongoDB connection error:', err.message);\n      cached.promise = null;\n      throw err;\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n  } catch (e) {\n    cached.promise = null;\n    console.error('❌ MongoDB connection error:', e);\n    throw e;\n  }\n\n  return cached.conn;\n}\n\nexport default connectDB;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MACR;AAEJ;AAgBA,IAAI,SAAwB,OAAO,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE3E,IAAI,CAAC,OAAO,QAAQ,EAAE;IACpB,OAAO,QAAQ,GAAG;AACpB;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;YAChB,0BAA0B;YAC1B,iBAAiB;QACnB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT,GAAG,KAAK,CAAC,CAAC;YACR,QAAQ,KAAK,CAAC,+BAA+B,IAAI,OAAO;YACxD,OAAO,OAAO,GAAG;YACjB,MAAM;QACR;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///E:/projects/edu-bridge-ai-platform/app/api/student/quizzes/%5Bid%5D/route.ts"],"sourcesContent":["import { getSession } from '@/lib/auth'\nimport StandaloneQuiz from '@/lib/models/StandaloneQuiz'\nimport connectDB from '@/lib/mongodb'\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const session = await getSession()\n    if (!session || session.role !== 'student') {\n      return NextResponse.json(\n        { success: false, error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    const { id } = await params\n    await connectDB()\n\n    const quiz = await StandaloneQuiz.findById(id).lean()\n    \n    if (!quiz) {\n      return NextResponse.json(\n        { success: false, error: 'Quiz not found' },\n        { status: 404 }\n      )\n    }\n\n    if (quiz.status !== 'published') {\n      return NextResponse.json(\n        { success: false, error: 'Quiz not available' },\n        { status: 403 }\n      )\n    }\n\n    return NextResponse.json(\n      { success: true, data: quiz },\n      { status: 200 }\n    )\n  } catch (error: any) {\n    console.error('Error fetching quiz:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch quiz', message: error.message },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IACpB,OAAoB,EACpB,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,2HAAU;QAChC,IAAI,CAAC,WAAW,QAAQ,IAAI,KAAK,WAAW;YAC1C,OAAO,+QAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAe,GACxC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,IAAA,2HAAS;QAEf,MAAM,OAAO,MAAM,4IAAc,CAAC,QAAQ,CAAC,IAAI,IAAI;QAEnD,IAAI,CAAC,MAAM;YACT,OAAO,+QAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAiB,GAC1C;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,KAAK,MAAM,KAAK,aAAa;YAC/B,OAAO,+QAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAqB,GAC9C;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAM,MAAM;QAAK,GAC5B;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;YAAwB,SAAS,MAAM,OAAO;QAAC,GACxE;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}