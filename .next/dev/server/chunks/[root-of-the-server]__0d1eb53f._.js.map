{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/projects/edu-bridge-ai-platform/app/api/teacher/ai/ppt/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\ninterface Slide {\n  title: string\n  content: string[]\n  notes?: string\n}\n\nasync function generatePPTWithCohere(topic: string, audience: string, numSlides: number, style: string, keyPoints: string): Promise<Slide[]> {\n  try {\n    const COHERE_API_KEY = process.env.COHERE_API_KEY\n    \n    if (!COHERE_API_KEY) {\n      console.error('COHERE_API_KEY not configured')\n      return generateFallbackSlides(topic, numSlides)\n    }\n\n    const keyPointsList = keyPoints ? keyPoints.split('\\n').filter(p => p.trim()) : []\n    const keyPointsText = keyPointsList.length > 0 ? `\\n\\nKey points to include:\\n${keyPointsList.map(p => `- ${p}`).join('\\n')}` : ''\n\n    const prompt = `Create a ${numSlides}-slide presentation about \"${topic}\" for ${audience}.\nStyle: ${style}${keyPointsText}\n\nGenerate a JSON array with exactly ${numSlides} slides. Each slide should have:\n- title: (string) Catchy slide title\n- content: (array of 3-5 strings) Bullet points with key information\n- notes: (string) Brief speaker notes\n\nExample format:\n[\n  {\n    \"title\": \"Introduction to ${topic}\",\n    \"content\": [\n      \"First key point\",\n      \"Second key point\",\n      \"Third key point\"\n    ],\n    \"notes\": \"Start with an engaging question\"\n  }\n]\n\nReturn ONLY the JSON array, no additional text.`\n\n    const response = await fetch('https://api.cohere.ai/v1/chat', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${COHERE_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        message: prompt,\n        model: 'command-r-plus-08-2024',\n        temperature: 0.8,\n        max_tokens: 3000,\n      }),\n    })\n\n    if (!response.ok) {\n      console.error('Cohere API error:', response.status, await response.text())\n      return generateFallbackSlides(topic, numSlides)\n    }\n\n    const data = await response.json()\n    const text = data.text || ''\n    \n    // Extract JSON from response\n    const jsonMatch = text.match(/\\[[\\s\\S]*\\]/)\n    if (jsonMatch) {\n      const slides = JSON.parse(jsonMatch[0])\n      return slides.slice(0, numSlides)\n    }\n    \n    return generateFallbackSlides(topic, numSlides)\n  } catch (error) {\n    console.error('Error generating PPT with Cohere:', error)\n    return generateFallbackSlides(topic, numSlides)\n  }\n}\n\nfunction generateFallbackSlides(topic: string, numSlides: number): Slide[] {\n  const slides: Slide[] = [\n    {\n      title: `${topic}`,\n      content: [\n        'Overview of the topic',\n        'Key concepts and definitions',\n        'Learning objectives'\n      ],\n      notes: 'Start with a warm welcome and topic introduction'\n    },\n    {\n      title: 'Background & Context',\n      content: [\n        'Historical background',\n        'Why this topic matters',\n        'Real-world applications'\n      ],\n      notes: 'Provide context to engage the audience'\n    },\n    {\n      title: 'Key Concepts',\n      content: [\n        'Fundamental principles',\n        'Core ideas explained',\n        'Important terminology'\n      ],\n      notes: 'Break down complex ideas into simple terms'\n    },\n    {\n      title: 'Detailed Explanation',\n      content: [\n        'In-depth analysis',\n        'Examples and case studies',\n        'Step-by-step process'\n      ],\n      notes: 'Use visual aids and examples'\n    },\n    {\n      title: 'Practical Applications',\n      content: [\n        'How to apply this knowledge',\n        'Common use cases',\n        'Industry examples'\n      ],\n      notes: 'Show real-world relevance'\n    },\n    {\n      title: 'Benefits & Impact',\n      content: [\n        'Advantages of understanding this topic',\n        'Impact on related fields',\n        'Future implications'\n      ],\n      notes: 'Emphasize the value of learning'\n    },\n    {\n      title: 'Challenges & Solutions',\n      content: [\n        'Common difficulties',\n        'Misconceptions to avoid',\n        'Best practices'\n      ],\n      notes: 'Address potential obstacles'\n    },\n    {\n      title: 'Advanced Topics',\n      content: [\n        'Going deeper into the subject',\n        'Related advanced concepts',\n        'Further learning resources'\n      ],\n      notes: 'For those wanting to explore more'\n    },\n    {\n      title: 'Summary',\n      content: [\n        'Recap of key points',\n        'Main takeaways',\n        'What we learned today'\n      ],\n      notes: 'Reinforce the main concepts'\n    },\n    {\n      title: 'Questions & Next Steps',\n      content: [\n        'Q&A session',\n        'Additional resources',\n        'How to continue learning'\n      ],\n      notes: 'Engage with audience and provide guidance'\n    }\n  ]\n\n  return slides.slice(0, numSlides)\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { topic, audience, numSlides, style, keyPoints } = await request.json()\n\n    if (!topic) {\n      return NextResponse.json(\n        { success: false, error: 'Topic is required' },\n        { status: 400 }\n      )\n    }\n\n    const slides = await generatePPTWithCohere(\n      topic,\n      audience || 'students',\n      numSlides || 10,\n      style || 'educational',\n      keyPoints || ''\n    )\n\n    return NextResponse.json({\n      success: true,\n      slides\n    })\n  } catch (error: any) {\n    console.error('Error generating PPT:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to generate presentation', message: error.message },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"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"}}]
}